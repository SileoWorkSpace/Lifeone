@model LifeOne.Models.AdminManagement.AEntity.ShoppingOrderInvoiceModel
@{
    ViewBag.Title = "Shopping Order Invoice";
    Layout = null;
}
@{ 
    decimal TotalTaxAmount = 0;
    decimal TotalCGST = 0;
    decimal TotalSGST = 0;
    decimal TotalIGST = 0;
    decimal AmountAfterTax = 0;
    decimal GSTAmount = 0;
    decimal TotalGSTAmount = 0;
    decimal TotalShippingCharges = 0;
}

@{
    decimal TotalGross=0;
    decimal TotalCGST = 0;
    decimal TotalSGST = 0;
    decimal TotalIGST = 0;
    decimal AmountAfterTax = 0;
    decimal TotalBox = 0;
 }
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>invoice</title>
</head>
<body>
    <div class="container" id="shoppingInvoice">
        <div style="
          padding-left: 10px;
          padding-right: 10px;
        ">
            <table style="width: 100%; background: #f1f1f1; color: black;border-collapse: collapse; border: 1px solid black;margin-top:10px;">
                <tbody>
                    <tr>
                        <td style="width: 40%;">
                            <img src="@Model.dtDetails.Rows[0]["CompanyLogo"].ToString()" style="width: 120px;height:120px;margin-right: 23px;padding-bottom: 5px;">

                        </td>
                        <td style="padding-bottom: 5px;font-size:25px;font-weight:500;">Tax Invoice</td>
                    </tr>
                    <tr>
                        <td style="padding-bottom: 5px;"></td>
                        <td style="width: 47%;text-align:center;">
                        </td>
                    </tr>
                </tbody>

            </table>
            <table style="width: 100%; border-collapse: collapse; border: 1px solid black;">
                <tbody>
                    <tr>
                        <td style="text-align: center;padding-bottom: 10px;"></td>
                    </tr>
                </tbody>
            </table>
            <table style="width: 100%; border-collapse: collapse; border: 1px solid black;"
                   class="table table-striped">
                <tbody>
                    <tr>
                        <td style="vertical-align: top;width:50%;border-collapse: collapse; border: 1px solid black;">
                            <table style="width: 100%;" class="table table-striped">
                                <tbody>
                                    <tr>
                                        <td style="
                          text-align: center;
                          background: #f1f1f1;
                          color: black;
                        ">
                                            Billing Details
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"></td>
                                    </tr>
                                    @*<tr>
                                            <td style="padding-left: 5px;" colspan="2"><b>Party Id : </b>@ViewBag.LoginId</td>
                                        </tr>*@
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"><b>Name : </b>@Model.dtDetails.Rows[0]["Name"].ToString()</td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            <b>Address : </b>
                                            @Model.dtDetails.Rows[0]["Address"].ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"><b>Contact No : </b>@Model.dtDetails.Rows[0]["MobileNo"].ToString()</td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                        <td style="vertical-align: top;width:50%;border-collapse: collapse;border: 1px solid black;">
                            <table style="width: 100%" class="table table-striped">
                                <tbody>
                                    <tr>
                                        <td style="
                            text-align: center;
                            background: #f1f1f1;
                            color: black;
                          ">
                                            Company
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"><b></b></td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            <b>
                                                @Model.dtDetails.Rows[0]["CompanyName"].ToString()
                                            </b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            @Model.dtDetails.Rows[0]["CompanyAddress"].ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            @Model.dtDetails.Rows[0]["ContactNo"].ToString()

                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            @*Whatsapp: @CompanyDetails.WhatsUp*@

                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            @*Email Id : @CompanyDetails.Email*@
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                    <tr>
                        <td style="vertical-align: top;width:50%;border-collapse: collapse; border: 1px solid black;">
                            <table style="width: 100%;" class="table table-striped">
                                <tbody>
                                    <tr>
                                        <td style="
                                text-align: center;
                                background: #f1f1f1;
                                color: black;
                              ">
                                            Shipping Address
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"></td>
                                    </tr>
                                    @*<tr>
                                            <td style="padding-left: 5px;" colspan="2"><b>Party Id : </b>@ViewBag.LoginId</td>
                                        </tr>*@
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"><b>Name : </b>@Model.dtDetails.Rows[0]["Name"].ToString()</td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            <b>Address : </b>@Model.dtDetails.Rows[0]["Address"].ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            <b>Contact No : </b>
                                            @Model.dtDetails.Rows[0]["MobileNo"].ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>

                        <td style="vertical-align: top;width:50%;border-collapse: collapse; border: 1px solid black;">
                            <table style="width: 100%;" class="table table-striped">
                                <tbody>
                                    <tr>
                                        <td colspan="2"></td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"><b>Transfer Invoice No : </b> @Model.dtDetails.Rows[0]["OrderNo"].ToString()</td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"><b>Invoice Date : </b>@Model.dtDetails.Rows[0]["InvoiceDate"].ToString()</td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            <b>Order No : </b>
                                            @Model.dtDetails.Rows[0]["OrderNo"].ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2">
                                            <b>Order Date : </b> @Model.dtDetails.Rows[0]["InvoiceDate"].ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-left: 5px;" colspan="2"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
            @if (Model.dtDetails.Rows[0]["state"].ToString() == "UTTAR PRADESH")
             {
                <table style="width: 100%; border-collapse: collapse;margin-top: 5px;"
                       class="table table-striped">
                    <thead>
                        <tr>
                            <td style="border: 1px solid black;padding-left: 2px;"> #</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> Product</td>
                            <td style="border: 1px solid black;padding-left: 3px;"> HSN CODE</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> Qty</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> MRP<br>(₹)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> CGST<br>(%)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> CGST<br>(₹)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> SGST<br>(%)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> SGST<br>(₹)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> Net Amt<br>(₹)</td>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null)
                        {

                            if (Model.dtDetails != null)
                            {
                                if (Model.dtDetails.Rows.Count > 0)
                                {

                                    for (int j = 0; j <= Model.dtDetails.Rows.Count - 1; j++)
                                    {

                                        TotalTaxAmount = TotalTaxAmount + decimal.Parse(Model.dtDetails.Rows[j]["TaxAmount"].ToString());
                                        TotalShippingCharges = TotalShippingCharges + decimal.Parse(Model.dtDetails.Rows[j]["ShippingCharge"].ToString());
                                        TotalCGST = TotalCGST + decimal.Parse(Model.dtDetails.Rows[j]["CGSTAmt"].ToString());
                                        TotalSGST = TotalSGST + decimal.Parse(Model.dtDetails.Rows[j]["SGSTAmt"].ToString());
                                        TotalIGST = TotalIGST + decimal.Parse(Model.dtDetails.Rows[j]["ISTAmt"].ToString());
                                        AmountAfterTax = TotalTaxAmount+TotalCGST + TotalSGST;
                                        <tr>
                                            <td style="border: 1px solid black;padding-left: 2px;"> @(j + 1) </td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["ProductName"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["HSNNo"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["Quantity"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["OrderAmount"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["CGSTPerc"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["CGSTAmt"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["SGSTPerc"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["SGSTAmt"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["SubTotal"]</td>
                                        </tr>
                                    }
                                }
                            }
                        }

                    </tbody>
                </table>
            }
            else
            {
                <table style="width: 100%; border-collapse: collapse;margin-top: 5px;"
                       class="table table-striped">
                    <thead>
                        <tr>
                            <td style="border: 1px solid black;padding-left: 2px;"> #</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> Product</td>
                            <td style="border: 1px solid black;padding-left: 3px;"> HSN CODE</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> Qty</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> MRP<br>(₹)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> IGST<br>(%)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> IGST<br>(₹)</td>
                            <td style="border: 1px solid black;padding-left: 5px;"> Net Amt<br>(₹)</td>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null)
                        {

                            if (Model.dtDetails != null)
                            {
                                if (Model.dtDetails.Rows.Count > 0)
                                {

                                    for (int j = 0; j <= Model.dtDetails.Rows.Count - 1; j++)
                                    {
                                        TotalTaxAmount = TotalTaxAmount + decimal.Parse(Model.dtDetails.Rows[j]["TaxAmount"].ToString());
                                        TotalShippingCharges = TotalShippingCharges + decimal.Parse(Model.dtDetails.Rows[j]["ShippingCharge"].ToString());
                                        TotalCGST = TotalCGST + decimal.Parse(Model.dtDetails.Rows[j]["CGSTAmt"].ToString());
                                        TotalSGST = TotalSGST + decimal.Parse(Model.dtDetails.Rows[j]["SGSTAmt"].ToString());
                                        TotalIGST = TotalIGST + decimal.Parse(Model.dtDetails.Rows[j]["ISTAmt"].ToString());
                                        AmountAfterTax = TotalTaxAmount+TotalIGST;
                                        <tr>
                                            <td style="border: 1px solid black;padding-left: 2px;"> @(j + 1) </td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["ProductName"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["HSNNo"]</td>

                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["Quantity"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["OrderAmount"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["IGSTPerc"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["ISTAmt"]</td>
                                            <td style="border: 1px solid black;padding-left: 5px;"> @Model.dtDetails.Rows[j]["SubTotal"]</td>
                                        </tr>
                                    }
                                }
                            }
                        }
                    </tbody>
                </table>
            }
            <table style="width: 100%; border-collapse: collapse"
                   class="table table-striped">
                <tbody>
                    <tr>
                        <td>
                            <table style="width: 100%; border-collapse: collapse"
                                   class="table table-striped">
                                <tbody>
                                    <tr>
                                        <td style="border: 1px solid black" colspan="2">
                                            <b>Before Tax Amount : </b>
                                        </td>
                                        <td style="border: 1px solid black" colspan="2">
                                            @Model.dtDetails.Rows[0]["TaxAmount"].ToString()

                                        </td>
                                    </tr>
                                    @if (Model.dtDetails.Rows[0]["state"].ToString() == "UTTAR PRADESH")
                                    {
                                        <tr>
                                            <td style="border: 1px solid black" colspan="2">
                                                <b> CGST : </b>
                                            </td>
                                            <td style="border: 1px solid black" colspan="2">
                                                @Model.dtDetails.Rows[0]["CGSTAmt"].ToString()
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid black" colspan="2">
                                                <b> SGST : </b>
                                            </td>
                                            <td style="border: 1px solid black" colspan="2">
                                                @Model.dtDetails.Rows[0]["SGSTAmt"].ToString()
                                            </td>
                                        </tr>
                                    }
                                    else
                                    {
                                        <tr>
                                            <td style="border: 1px solid black" colspan="2">
                                                <b> IGST : </b>
                                            </td>
                                            <td style="border: 1px solid black" colspan="2">
                                                @Model.dtDetails.Rows[0]["ISTAmt"].ToString()
                                            </td>
                                        </tr>
                                    }
                                    <tr>
                                        <td style="border: 1px solid black" colspan="2">
                                            <b>Shipping Charges:</b>
                                        </td>
                                        <td style="border: 1px solid black" colspan="2">
                                            @Model.dtDetails.Rows[0]["ShippingCharge"].ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;" colspan="2">
                                            <b>Total Amount After Tax : </b>
                                        </td>
                                        <td style="border: 1px solid black;" colspan="2">
                                            @(AmountAfterTax + TotalShippingCharges)
                                            @*@Model.dtDetails.Rows[0]["TotalAmountAfterTax"].ToString()*@
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table style="width: 100%" class="table table-striped"></table>
            <table style="width: 100%;" class="table table-striped">
                <tbody>
                    <tr>
                        <td style="padding: 10px 0px 10px 0px;" colspan="2">
                            <b>
                                Declaration
                            </b> <br />
                            We declare that this invoice shows the actual price of the goods described and that all particulars are true and correct.
                        </td>
                    </tr>
                </tbody>
            </table>
            <table style="width: 100%;color: black">
                <tbody>
                    <tr>
                        <td style="text-align: center;"></td>
                    </tr>
                </tbody>
            </table>
            <table style="width: 100%;color: black">
                <tbody>
                    <tr>
                        <td style="padding-top: 10px;text-align: center;">
                            <b>(Note : This is system generated invoice, signature not required.)</b>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    @*<script>
            function printDiv() {
                $("#shoppingInvoice").show();
                window.print();
            }
        </script>
        <script src="/_framework/aspnetcore-browser-refresh.js"></script>*@
</body>
<script src="~/assets/libs/jquery/jquery.min.js"></script>
<script>
    function printDiv(shoppingInvoice) {
        debugger
        var printContents = document.getElementById(shoppingInvoice).innerHTML;
        var originalContents = document.body.innerHTML;
        document.body.innerHTML = printContents;
        window.print();
        document.body.innerHTML = originalContents;
    }
    $(document).ready(function () {

        printDiv('shoppingInvoice');
    });

</script>
</html>
